#include "stdafx.h"
#include "MobGroupIdxChanger.h"
#include "Attr_Page.h"


CMobGroupIdxChanger::CMobGroupIdxChanger( CTSTrigger* pTSTrigger )
: CChanger( pTSTrigger )
{
mapdef_ConvertList[1415143] = 1415114;
mapdef_ConvertList[1415144] = 1415114;
mapdef_ConvertList[1415145] = 1415114;
mapdef_ConvertList[1415146] = 1415115;
mapdef_ConvertList[1415147] = 1415115;
mapdef_ConvertList[1415148] = 1415115;
mapdef_ConvertList[1415149] = 1415116;
mapdef_ConvertList[1415150] = 1415116;
mapdef_ConvertList[1415151] = 1415116;
mapdef_ConvertList[1512125] = 1512108;
mapdef_ConvertList[1512126] = 1512108;
mapdef_ConvertList[1512127] = 1512108;
mapdef_ConvertList[2131125] = 2131108;
mapdef_ConvertList[2131126] = 2131108;
mapdef_ConvertList[2131127] = 2131108;
mapdef_ConvertList[2131128] = 2131109;
mapdef_ConvertList[2131129] = 2131109;
mapdef_ConvertList[2131130] = 2131109;
mapdef_ConvertList[2131131] = 2131110;
mapdef_ConvertList[2131132] = 2131110;
mapdef_ConvertList[2131133] = 2131110;
mapdef_ConvertList[2131134] = 2131111;
mapdef_ConvertList[2131135] = 2131111;
mapdef_ConvertList[2131136] = 2131111;
mapdef_ConvertList[2131137] = 2131112;
mapdef_ConvertList[2131138] = 2131112;
mapdef_ConvertList[2131139] = 2131112;
mapdef_ConvertList[2131140] = 2131113;
mapdef_ConvertList[2131141] = 2131113;
mapdef_ConvertList[2131142] = 2131113;
mapdef_ConvertList[2131143] = 2131114;
mapdef_ConvertList[2131144] = 2131114;
mapdef_ConvertList[2131145] = 2131114;
mapdef_ConvertList[2131146] = 2131115;
mapdef_ConvertList[2131147] = 2131115;
mapdef_ConvertList[2131148] = 2131115;
mapdef_ConvertList[2131149] = 2131116;
mapdef_ConvertList[2131150] = 2131116;
mapdef_ConvertList[2131151] = 2131116;
mapdef_ConvertList[2611125] = 2611108;
mapdef_ConvertList[2611126] = 2611108;
mapdef_ConvertList[2611127] = 2611108;
mapdef_ConvertList[2611128] = 2611109;
mapdef_ConvertList[2611129] = 2611109;
mapdef_ConvertList[2611130] = 2611109;
mapdef_ConvertList[2611131] = 2611110;
mapdef_ConvertList[2611132] = 2611110;
mapdef_ConvertList[2611133] = 2611110;
mapdef_ConvertList[2611134] = 2611111;
mapdef_ConvertList[2611135] = 2611111;
mapdef_ConvertList[2611136] = 2611111;
mapdef_ConvertList[2611137] = 2611112;
mapdef_ConvertList[2611138] = 2611112;
mapdef_ConvertList[2611139] = 2611112;
mapdef_ConvertList[2612125] = 2612108;
mapdef_ConvertList[2612126] = 2612108;
mapdef_ConvertList[2612127] = 2612108;
mapdef_ConvertList[2612128] = 2612109;
mapdef_ConvertList[2612129] = 2612109;
mapdef_ConvertList[2612130] = 2612109;
mapdef_ConvertList[2612131] = 2612110;
mapdef_ConvertList[2612132] = 2612110;
mapdef_ConvertList[2612133] = 2612110;
mapdef_ConvertList[2612134] = 2612111;
mapdef_ConvertList[2612135] = 2612111;
mapdef_ConvertList[2612136] = 2612111;
mapdef_ConvertList[2612137] = 2612112;
mapdef_ConvertList[2612138] = 2612112;
mapdef_ConvertList[2612139] = 2612112;
mapdef_ConvertList[2612140] = 2612113;
mapdef_ConvertList[2612141] = 2612113;
mapdef_ConvertList[2612142] = 2612113;
mapdef_ConvertList[2612143] = 2612114;
mapdef_ConvertList[2612144] = 2612114;
mapdef_ConvertList[2612145] = 2612114;
mapdef_ConvertList[2612146] = 2612115;
mapdef_ConvertList[2612147] = 2612115;
mapdef_ConvertList[2612148] = 2612115;
mapdef_ConvertList[3212125] = 3212108;
mapdef_ConvertList[3212126] = 3212108;
mapdef_ConvertList[3212127] = 3212108;
mapdef_ConvertList[3212128] = 3212109;
mapdef_ConvertList[3212129] = 3212109;
mapdef_ConvertList[3212130] = 3212109;
mapdef_ConvertList[3212131] = 3212110;
mapdef_ConvertList[3212132] = 3212110;
mapdef_ConvertList[3212133] = 3212110;
mapdef_ConvertList[3212134] = 3212111;
mapdef_ConvertList[3212135] = 3212111;
mapdef_ConvertList[3212136] = 3212111;
mapdef_ConvertList[3212137] = 3212112;
mapdef_ConvertList[3212138] = 3212112;
mapdef_ConvertList[3212139] = 3212112;
mapdef_ConvertList[3501125] = 3501108;
mapdef_ConvertList[3501126] = 3501108;
mapdef_ConvertList[3501127] = 3501108;
mapdef_ConvertList[3501128] = 3501109;
mapdef_ConvertList[3501129] = 3501109;
mapdef_ConvertList[3501130] = 3501109;
mapdef_ConvertList[3501131] = 3501110;
mapdef_ConvertList[3501132] = 3501110;
mapdef_ConvertList[3501133] = 3501110;
mapdef_ConvertList[3501134] = 3501111;
mapdef_ConvertList[3501135] = 3501111;
mapdef_ConvertList[3501136] = 3501111;
mapdef_ConvertList[3502125] = 3502108;
mapdef_ConvertList[3502126] = 3502108;
mapdef_ConvertList[3502127] = 3502108;
mapdef_ConvertList[4031125] = 4031108;
mapdef_ConvertList[4031126] = 4031108;
mapdef_ConvertList[4031127] = 4031108;
mapdef_ConvertList[4031128] = 4031109;
mapdef_ConvertList[4031129] = 4031109;
mapdef_ConvertList[4031130] = 4031109;
mapdef_ConvertList[4032125] = 4032108;
mapdef_ConvertList[4032126] = 4032108;
mapdef_ConvertList[4032127] = 4032108;
mapdef_ConvertList[4032128] = 4032109;
mapdef_ConvertList[4032129] = 4032109;
mapdef_ConvertList[4032130] = 4032109;
mapdef_ConvertList[4032131] = 4032110;
mapdef_ConvertList[4032132] = 4032110;
mapdef_ConvertList[4032133] = 4032110;
mapdef_ConvertList[4032134] = 4032111;
mapdef_ConvertList[4032135] = 4032111;
mapdef_ConvertList[4032136] = 4032111;
mapdef_ConvertList[4032137] = 4032112;
mapdef_ConvertList[4032138] = 4032112;
mapdef_ConvertList[4032139] = 4032112;
mapdef_ConvertList[4032140] = 4032113;
mapdef_ConvertList[4032141] = 4032113;
mapdef_ConvertList[4032142] = 4032113;
mapdef_ConvertList[4032143] = 4032114;
mapdef_ConvertList[4032144] = 4032114;
mapdef_ConvertList[4032145] = 4032114;
mapdef_ConvertList[4032146] = 4032115;
mapdef_ConvertList[4032147] = 4032115;
mapdef_ConvertList[4032148] = 4032115;
mapdef_ConvertList[4511125] = 4511108;
mapdef_ConvertList[4511126] = 4511108;
mapdef_ConvertList[4511127] = 4511108;
mapdef_ConvertList[4511128] = 4511109;
mapdef_ConvertList[4511129] = 4511109;
mapdef_ConvertList[4511130] = 4511109;
mapdef_ConvertList[4511131] = 4511110;
mapdef_ConvertList[4511132] = 4511110;
mapdef_ConvertList[4511133] = 4511110;
mapdef_ConvertList[4512125] = 4512108;
mapdef_ConvertList[4512126] = 4512108;
mapdef_ConvertList[4512127] = 4512108;
mapdef_ConvertList[4513125] = 4513108;
mapdef_ConvertList[4513126] = 4513108;
mapdef_ConvertList[4513127] = 4513108;
mapdef_ConvertList[4513128] = 4513109;
mapdef_ConvertList[4513129] = 4513109;
mapdef_ConvertList[4513130] = 4513109;
mapdef_ConvertList[4513131] = 4513110;
mapdef_ConvertList[4513132] = 4513110;
mapdef_ConvertList[4513133] = 4513110;
mapdef_ConvertList[4513134] = 4513111;
mapdef_ConvertList[4513135] = 4513111;
mapdef_ConvertList[4513136] = 4513111;
mapdef_ConvertList[4513137] = 4513112;
mapdef_ConvertList[4513138] = 4513112;
mapdef_ConvertList[4513139] = 4513112;
mapdef_ConvertList[4513140] = 4513113;
mapdef_ConvertList[4513141] = 4513113;
mapdef_ConvertList[4513142] = 4513113;
mapdef_ConvertList[4513143] = 4513114;
mapdef_ConvertList[4513144] = 4513114;
mapdef_ConvertList[4513145] = 4513114;
mapdef_ConvertList[4513146] = 4513115;
mapdef_ConvertList[4513147] = 4513115;
mapdef_ConvertList[4513148] = 4513115;
mapdef_ConvertList[4881125] = 4881108;
mapdef_ConvertList[4881126] = 4881108;
mapdef_ConvertList[4881127] = 4881108;
mapdef_ConvertList[5214125] = 5214108;
mapdef_ConvertList[5214126] = 5214108;
mapdef_ConvertList[5214127] = 5214108;
mapdef_ConvertList[5611125] = 5611108;
mapdef_ConvertList[5611126] = 5611108;
mapdef_ConvertList[5611127] = 5611108;
mapdef_ConvertList[5611128] = 5611109;
mapdef_ConvertList[5611129] = 5611109;
mapdef_ConvertList[5611130] = 5611109;
mapdef_ConvertList[5611131] = 5611110;
mapdef_ConvertList[5611132] = 5611110;
mapdef_ConvertList[5611133] = 5611110;
mapdef_ConvertList[5611134] = 5611111;
mapdef_ConvertList[5611135] = 5611111;
mapdef_ConvertList[5611136] = 5611111;
mapdef_ConvertList[5611137] = 5611112;
mapdef_ConvertList[5611138] = 5611112;
mapdef_ConvertList[5611139] = 5611112;
mapdef_ConvertList[5611140] = 5611113;
mapdef_ConvertList[5611141] = 5611113;
mapdef_ConvertList[5611142] = 5611113;
mapdef_ConvertList[5611143] = 5611114;
mapdef_ConvertList[5611144] = 5611114;
mapdef_ConvertList[5611145] = 5611114;
mapdef_ConvertList[5611146] = 5611115;
mapdef_ConvertList[5611147] = 5611115;
mapdef_ConvertList[5611148] = 5611115;
mapdef_ConvertList[5611152] = 5611117;
mapdef_ConvertList[5611153] = 5611117;
mapdef_ConvertList[5611154] = 5611117;
mapdef_ConvertList[5612125] = 5612108;
mapdef_ConvertList[5612126] = 5612108;
mapdef_ConvertList[5612127] = 5612108;
mapdef_ConvertList[5811125] = 5811108;
mapdef_ConvertList[5811126] = 5811108;
mapdef_ConvertList[5811127] = 5811108;
mapdef_ConvertList[5811128] = 5811109;
mapdef_ConvertList[5811129] = 5811109;
mapdef_ConvertList[5811130] = 5811109;
mapdef_ConvertList[5811131] = 5811110;
mapdef_ConvertList[5811132] = 5811110;
mapdef_ConvertList[5811133] = 5811110;
mapdef_ConvertList[5811134] = 5811111;
mapdef_ConvertList[5811135] = 5811111;
mapdef_ConvertList[5811136] = 5811111;
mapdef_ConvertList[6011125] = 6011108;
mapdef_ConvertList[6011126] = 6011108;
mapdef_ConvertList[6011127] = 6011108;
mapdef_ConvertList[6011128] = 6011109;
mapdef_ConvertList[6011129] = 6011109;
mapdef_ConvertList[6011130] = 6011109;
mapdef_ConvertList[6011131] = 6011110;
mapdef_ConvertList[6011132] = 6011110;
mapdef_ConvertList[6011133] = 6011110;
mapdef_ConvertList[6011225] = 6011208;
mapdef_ConvertList[6011226] = 6011208;
mapdef_ConvertList[6011227] = 6011208;
mapdef_ConvertList[6011228] = 6011209;
mapdef_ConvertList[6011229] = 6011209;
mapdef_ConvertList[6011230] = 6011209;
mapdef_ConvertList[6011231] = 6011210;
mapdef_ConvertList[6011232] = 6011210;
mapdef_ConvertList[6011233] = 6011210;
mapdef_ConvertList[6011234] = 6011211;
mapdef_ConvertList[6011235] = 6011211;
mapdef_ConvertList[6011236] = 6011211;
mapdef_ConvertList[6011237] = 6011212;
mapdef_ConvertList[6011238] = 6011212;
mapdef_ConvertList[6011239] = 6011212;
mapdef_ConvertList[6011240] = 6011213;
mapdef_ConvertList[6011241] = 6011213;
mapdef_ConvertList[6011242] = 6011213;
mapdef_ConvertList[6211125] = 6211108;
mapdef_ConvertList[6211126] = 6211108;
mapdef_ConvertList[6211127] = 6211108;
mapdef_ConvertList[6211128] = 6211109;
mapdef_ConvertList[6211129] = 6211109;
mapdef_ConvertList[6211130] = 6211109;
mapdef_ConvertList[6211131] = 6211110;
mapdef_ConvertList[6211132] = 6211110;
mapdef_ConvertList[6211133] = 6211110;
mapdef_ConvertList[6211134] = 6211111;
mapdef_ConvertList[6211135] = 6211111;
mapdef_ConvertList[6211136] = 6211111;
mapdef_ConvertList[6212125] = 6212108;
mapdef_ConvertList[6212126] = 6212108;
mapdef_ConvertList[6212127] = 6212108;
mapdef_ConvertList[6212128] = 6212109;
mapdef_ConvertList[6212129] = 6212109;
mapdef_ConvertList[6212130] = 6212109;
mapdef_ConvertList[6212131] = 6212110;
mapdef_ConvertList[6212132] = 6212110;
mapdef_ConvertList[6212133] = 6212110;
mapdef_ConvertList[6212134] = 6212111;
mapdef_ConvertList[6212135] = 6212111;
mapdef_ConvertList[6212136] = 6212111;
mapdef_ConvertList[6612225] = 6612208;
mapdef_ConvertList[6612226] = 6612208;
mapdef_ConvertList[6612227] = 6612208;
mapdef_ConvertList[6612228] = 6612209;
mapdef_ConvertList[6612229] = 6612209;
mapdef_ConvertList[6612230] = 6612209;
mapdef_ConvertList[6612231] = 6612210;
mapdef_ConvertList[6612232] = 6612210;
mapdef_ConvertList[6612233] = 6612210;
mapdef_ConvertList[6811125] = 6811108;
mapdef_ConvertList[6811126] = 6811108;
mapdef_ConvertList[6811127] = 6811108;
mapdef_ConvertList[6811128] = 6811109;
mapdef_ConvertList[6811129] = 6811109;
mapdef_ConvertList[6811130] = 6811109;
mapdef_ConvertList[7113243] = 7113214;
mapdef_ConvertList[7113244] = 7113214;
mapdef_ConvertList[7113245] = 7113214;
mapdef_ConvertList[7114140] = 7114113;
mapdef_ConvertList[7114141] = 7114113;
mapdef_ConvertList[7114142] = 7114113;
mapdef_ConvertList[7114143] = 7114114;
mapdef_ConvertList[7114144] = 7114114;
mapdef_ConvertList[7114145] = 7114114;
mapdef_ConvertList[7114146] = 7114115;
mapdef_ConvertList[7114147] = 7114115;
mapdef_ConvertList[7114148] = 7114115;
mapdef_ConvertList[7114149] = 7114116;
mapdef_ConvertList[7114150] = 7114116;
mapdef_ConvertList[7114151] = 7114116;
mapdef_ConvertList[7114152] = 7114117;
mapdef_ConvertList[7114153] = 7114117;
mapdef_ConvertList[7114154] = 7114117;
mapdef_ConvertList[7114155] = 7114118;
mapdef_ConvertList[7114156] = 7114118;
mapdef_ConvertList[7114157] = 7114118;
mapdef_ConvertList[7114158] = 7114119;
mapdef_ConvertList[7114159] = 7114119;
mapdef_ConvertList[7114160] = 7114119;
mapdef_ConvertList[7114161] = 7114120;
mapdef_ConvertList[7114162] = 7114120;
mapdef_ConvertList[7114163] = 7114120;
mapdef_ConvertList[7114164] = 7114121;
mapdef_ConvertList[7114165] = 7114121;
mapdef_ConvertList[7114166] = 7114121;
mapdef_ConvertList[7114325] = 7114308;
mapdef_ConvertList[7114326] = 7114308;
mapdef_ConvertList[7114327] = 7114308;
mapdef_ConvertList[7114328] = 7114309;
mapdef_ConvertList[7114329] = 7114309;
mapdef_ConvertList[7114330] = 7114309;
mapdef_ConvertList[7114331] = 7114310;
mapdef_ConvertList[7114332] = 7114310;
mapdef_ConvertList[7114333] = 7114310;
mapdef_ConvertList[7114334] = 7114311;
mapdef_ConvertList[7114335] = 7114311;
mapdef_ConvertList[7114336] = 7114311;
mapdef_ConvertList[7114337] = 7114312;
mapdef_ConvertList[7114338] = 7114312;
mapdef_ConvertList[7114339] = 7114312;
mapdef_ConvertList[7114340] = 7114313;
mapdef_ConvertList[7114341] = 7114313;
mapdef_ConvertList[7114342] = 7114313;
mapdef_ConvertList[7114343] = 7114314;
mapdef_ConvertList[7114344] = 7114314;
mapdef_ConvertList[7114345] = 7114314;
mapdef_ConvertList[7114346] = 7114315;
mapdef_ConvertList[7114347] = 7114315;
mapdef_ConvertList[7114348] = 7114315;
mapdef_ConvertList[7114349] = 7114316;
mapdef_ConvertList[7114350] = 7114316;
mapdef_ConvertList[7114351] = 7114316;
mapdef_ConvertList[8112125] = 8112108;
mapdef_ConvertList[8112126] = 8112108;
mapdef_ConvertList[8112127] = 8112108;
mapdef_ConvertList[8912128] = 8912109;
mapdef_ConvertList[8912129] = 8912109;
mapdef_ConvertList[8912130] = 8912109;
mapdef_ConvertList[8912131] = 8912110;
mapdef_ConvertList[8912132] = 8912110;
mapdef_ConvertList[8912133] = 8912110;
mapdef_ConvertList[8912134] = 8912111;
mapdef_ConvertList[8912135] = 8912111;
mapdef_ConvertList[8912136] = 8912111;
mapdef_ConvertList[8912225] = 8912208;
mapdef_ConvertList[8912226] = 8912208;
mapdef_ConvertList[8912227] = 8912208;
mapdef_ConvertList[8912228] = 8912209;
mapdef_ConvertList[8912229] = 8912209;
mapdef_ConvertList[8912230] = 8912209;
mapdef_ConvertList[8912231] = 8912210;
mapdef_ConvertList[8912232] = 8912210;
mapdef_ConvertList[8912233] = 8912210;
mapdef_ConvertList[8912234] = 8912211;
mapdef_ConvertList[8912235] = 8912211;
mapdef_ConvertList[8912236] = 8912211;
mapdef_ConvertList[8912237] = 8912212;
mapdef_ConvertList[8912238] = 8912212;
mapdef_ConvertList[8912239] = 8912212;
mapdef_ConvertList[9611125] = 9611108;
mapdef_ConvertList[9611126] = 9611108;
mapdef_ConvertList[9611127] = 9611108;
mapdef_ConvertList[9611128] = 9611109;
mapdef_ConvertList[9611129] = 9611109;
mapdef_ConvertList[9611130] = 9611109;
mapdef_ConvertList[9611131] = 9611110;
mapdef_ConvertList[9611132] = 9611110;
mapdef_ConvertList[9611133] = 9611110;
mapdef_ConvertList[9611134] = 9611111;
mapdef_ConvertList[9611135] = 9611111;
mapdef_ConvertList[9611136] = 9611111;
mapdef_ConvertList[9615128] = 9615109;
mapdef_ConvertList[9615129] = 9615109;
mapdef_ConvertList[9615130] = 9615109;
mapdef_ConvertList[9615131] = 9615110;
mapdef_ConvertList[9615132] = 9615110;
mapdef_ConvertList[9615133] = 9615110;
mapdef_ConvertList[9615155] = 9615118;
mapdef_ConvertList[9615156] = 9615118;
mapdef_ConvertList[9615157] = 9615118;
}

CMobGroupIdxChanger::~CMobGroupIdxChanger( void )
{
}

CString CMobGroupIdxChanger::Trigger( NTL_TS_T_ID tID, CAttrData* pAttr )
{
	return pAttr->GetAttr();
}

CString CMobGroupIdxChanger::Entity( NTL_TS_T_ID tID, NTL_TS_TG_ID tgID, NTL_TS_TC_ID tcID, CString strType, CAttrData* pAttr )
{
	//////////////////////////////////////////////////////////////////////////
	// Event
	//////////////////////////////////////////////////////////////////////////
	if ( strType == _T("E_ClickMob") )
	{
		pAttr->ChangeAttr( _T("mgidx"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("mgidx") ) ) ) );
	}
	else if ( strType == _T("E_ItemUse") )
	{
		if ( eEVENT_ITEM_TARGET_TYPE_MOB == MakeUnsignedInt( pAttr->FindAttr( _T("ttype") ) ) )
		{
			pAttr->ChangeAttr( _T("tidx"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("tidx") ) ) ) );
		}
	}
	else if ( strType == _T("E_SkillUse") )
	{
		if ( eEVENT_SKILL_TARGET_TYPE_MOB == MakeUnsignedInt( pAttr->FindAttr( _T("ttype") ) ) )
		{
			pAttr->ChangeAttr( _T("tidx"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("tidx") ) ) ) );
		}
	}
	else if ( strType == _T("E_ScoutUse") )
	{
		if ( eEVENT_SCOUTER_TARGET_TYPE_MOB == MakeUnsignedInt( pAttr->FindAttr( _T("tt") ) ) )
		{
			pAttr->ChangeAttr( _T("tidx"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("tidx") ) ) ) );
		}
	}
	//////////////////////////////////////////////////////////////////////////
	// Action
	//////////////////////////////////////////////////////////////////////////
	else if ( strType == _T("A_BroadCast") )
	{
		if ( eBROAD_MSG_OWNER_TYPE_MOB == MakeUnsignedInt( pAttr->FindAttr( _T("ot") ) ) )
		{
			pAttr->ChangeAttr( _T("oidx"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("oidx") ) ) ) );
		}
	}
	else if ( strType == _T("A_RegCTiming") )
	{
		if ( eREG_C_TIMING_MOB_CLICK_FLAG & MakeUnsignedInt( pAttr->FindAttr( _T("flags") ) ) )
		{
			pAttr->ChangeAttr( _T("0_midx"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("0_midx") ) ) ) );
		}
	}
	else if ( strType == _T("A_SToCEvt") )
	{
		unsigned int uiType = MakeUnsignedInt( pAttr->FindAttr( _T("eitype") ) );

		if ( eSTOC_EVT_DATA_TYPE_MOB_KILL_CNT == uiType )
		{
			pAttr->ChangeAttr( _T("idx0"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("idx0") ) ) ) );
			pAttr->ChangeAttr( _T("idx1"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("idx1") ) ) ) );
			pAttr->ChangeAttr( _T("idx2"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("idx2") ) ) ) );
		}
		else if ( eSTOC_EVT_DATA_TYPE_MOB_KILL_ITEM_CNT == uiType )
		{
			pAttr->ChangeAttr( _T("idx0"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("idx0") ) ) ) );
			pAttr->ChangeAttr( _T("idx1"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("idx1") ) ) ) );
			pAttr->ChangeAttr( _T("idx2"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("idx2") ) ) ) );
		}
	}
	//////////////////////////////////////////////////////////////////////////
	// Container
	//////////////////////////////////////////////////////////////////////////
	else if ( strType == _T("CT_Narration") )
	{
		if ( eNARRATION_OWNER_MOB == MakeUnsignedInt( pAttr->FindAttr( _T("ot") ) ) )
		{
			pAttr->ChangeAttr( _T("oi"), ConvertMobGroupIdx( MakeUnsignedInt( pAttr->FindAttr( _T("oi") ) ) ) );
		}
	}

	return pAttr->GetAttr();
}

CString CMobGroupIdxChanger::ConvertMobGroupIdx( unsigned int uiVal )
{
	std::map< unsigned int, unsigned int >::iterator it = mapdef_ConvertList.find( uiVal );

	if ( it == mapdef_ConvertList.end() )
	{
		return MakeString( uiVal );
	}
	else
	{
		return MakeString( it->second );
	}
}

CString CMobGroupIdxChanger::MakeString( unsigned int uiVal )
{
	CString strVal;
	strVal.Format( "%d", uiVal );
	return strVal;
}

unsigned int CMobGroupIdxChanger::MakeUnsignedInt( CString& clVal )
{
	if ( clVal.IsEmpty() )
	{
		return 0xffffffff;
	}

	return atoi( clVal.GetBuffer() );
}
